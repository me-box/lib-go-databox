

# libDatabox
`import "./"`

* [Overview](#pkg-overview)
* [Index](#pkg-index)
* [Subdirectories](#pkg-subdirectories)

## <a name="pkg-overview">Overview</a>
A golang library for interfacing with Databox APIs.

Install using go get github.com/me-box/lib-go-databox

Examples can be found in the samples directory




## <a name="pkg-index">Index</a>
* [func ExportLongpoll(destination string, payload string) (string, error)](#ExportLongpoll)
* [func GetHttpsCredentials() string](#GetHttpsCredentials)
* [func JsonUnmarshal(s string) (map[string]interface{}, error)](#JsonUnmarshal)
* [type DataSourceMetadata](#DataSourceMetadata)
  * [func HypercatToDataSourceMetadata(hypercatDataSourceDescription string) (DataSourceMetadata, error)](#HypercatToDataSourceMetadata)
* [type KeyValue_0_2_0](#KeyValue_0_2_0)
  * [func NewKeyValueClient(reqEndpoint string, dataSourceID string, enableLogging bool) (KeyValue_0_2_0, error)](#NewKeyValueClient)
* [type TimeSeries_0_2_0](#TimeSeries_0_2_0)
  * [func NewTimeSeriesClient(reqEndpoint string, dataSourceID string, enableLogging bool) (TimeSeries_0_2_0, error)](#NewTimeSeriesClient)


#### <a name="pkg-files">Package files</a>
[export.go](/src/target/export.go) [store-core-kv.go](/src/target/store-core-kv.go) [store-core-ts.go](/src/target/store-core-ts.go) [utils.go](/src/target/utils.go) 





## <a name="ExportLongpoll">func</a> [ExportLongpoll](/src/target/export.go?s=339:410#L5)
``` go
func ExportLongpoll(destination string, payload string) (string, error)
```
ExportLongpoll exports data to external service (payload must be an escaped json string)
permissions must be requested in the app manifest (drivers dont need to use the export service)



## <a name="GetHttpsCredentials">func</a> [GetHttpsCredentials](/src/target/utils.go?s=1752:1785#L68)
``` go
func GetHttpsCredentials() string
```
GetHttpsCredentials Returns a string containing the HTTPS credentials to pass to https server when offering an https server.
These are read form /run/secrets/DATABOX.pem and are generated by the container-manger at run time.



## <a name="JsonUnmarshal">func</a> [JsonUnmarshal](/src/target/utils.go?s=1942:2002#L74)
``` go
func JsonUnmarshal(s string) (map[string]interface{}, error)
```
JsonUnmarshal is a helper function to translate JSON stringified environment variable
to go map[string]




## <a name="DataSourceMetadata">type</a> [DataSourceMetadata](/src/target/utils.go?s=3842:4081#L155)
``` go
type DataSourceMetadata struct {
    Description    string
    ContentType    string
    Vendor         string
    DataSourceType string
    DataSourceID   string
    StoreType      string
    IsActuator     bool
    Unit           string
    Location       string
}
```






### <a name="HypercatToDataSourceMetadata">func</a> [HypercatToDataSourceMetadata](/src/target/utils.go?s=6172:6271#L220)
``` go
func HypercatToDataSourceMetadata(hypercatDataSourceDescription string) (DataSourceMetadata, error)
```
HypercatToDataSourceMetadata is a helper function to convert the hypercat description of a datasource to a DataSourceMetadata instance





## <a name="KeyValue_0_2_0">type</a> [KeyValue_0_2_0](/src/target/store-core-kv.go?s=109:458#L1)
``` go
type KeyValue_0_2_0 interface {
    // Write value.
    Write(payload string) error
    // Read values.
    Read() (string, error)
    // Get notifications of updated values
    Observe() (<-chan string, error)
    // registerDatasource is used by apps and drivers to register data sources in stores they
    // own.
    RegisterDatasource(metadata DataSourceMetadata) error
}
```






### <a name="NewKeyValueClient">func</a> [NewKeyValueClient](/src/target/store-core-kv.go?s=967:1074#L24)
``` go
func NewKeyValueClient(reqEndpoint string, dataSourceID string, enableLogging bool) (KeyValue_0_2_0, error)
```
NewKeyValueClient returns a new KeyValueClient to enable reading and writing of key value data to the store
reqEndpoint is provided in the DATABOX_ZMQ_ENDPOINT environment varable to databox apps and drivers.
dataSourceID is passed in the to apps in the environment varable and can be extracted from the hypercat
drivers are responsible for managing their dataSourceIDs





## <a name="TimeSeries_0_2_0">type</a> [TimeSeries_0_2_0](/src/target/store-core-ts.go?s=120:1588#L2)
``` go
type TimeSeries_0_2_0 interface {
    // Write  will be timstamed with write time in ms since the unix epoch by the store
    Write(payload string) error
    // WriteAt will be timstamed with timestamp provided in ms since the unix epoch
    WriteAt(timestamp int64, payload string) error
    // Read the latest value.
    // return data is a JSON object of the format {"timestamp":213123123,"data":[data-written-by-driver]}
    Latest() (string, error)
    // Read the last N values.
    // return data is an array of JSON objects of the format {"timestamp":213123123,"data":[data-written-by-driver]}
    LastN(n int) (string, error)
    // Read values written after the provided timestamp in in ms since the unix epoch.
    // return data is an array of JSON objects of the format {"timestamp":213123123,"data":[data-written-by-driver]}
    Since(sinceTimeStamp int64) (string, error)
    // Read values written between the start timestamp and end timestamp in in ms since the unix epoch.
    // return data is an array of JSON objects of the format {"timestamp":213123123,"data":[data-written-by-driver]}
    Range(formTimeStamp int64, toTimeStamp int64) (string, error)
    // Get notifications when a new value is written
    Observe() (<-chan string, error)
    // registerDatasource is used by apps and drivers to register data sources in stores they own.
    // the returned chan receives valuse of the form {"timestamp":213123123,"data":[data-written-by-driver]}
    RegisterDatasource(metadata DataSourceMetadata) error
}
```






### <a name="NewTimeSeriesClient">func</a> [NewTimeSeriesClient](/src/target/store-core-ts.go?s=1930:2041#L35)
``` go
func NewTimeSeriesClient(reqEndpoint string, dataSourceID string, enableLogging bool) (TimeSeries_0_2_0, error)
```
NewTimeSeriesClient returns a new KeyTimeSeriesClient to enable interaction with a time series data store
reqEndpoint is provided in the DATABOX_ZMQ_ENDPOINT environment varable to databox apps and drivers.









- - -
Generated by [godoc2md](http://godoc.org/github.com/davecheney/godoc2md)
