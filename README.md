

# libDatabox
`import "./"`

* [Overview](#pkg-overview)
* [Index](#pkg-index)
* [Subdirectories](#pkg-subdirectories)

## <a name="pkg-overview">Overview</a>
A golang library for interfacing with Databox APIs.

Install using go get github.com/me-box/lib-go-databox

Examples can be found in the samples directory




## <a name="pkg-index">Index</a>
* [func ExportLongpoll(destination string, payload string) (string, error)](#ExportLongpoll)
* [func GetHttpsCredentials() string](#GetHttpsCredentials)
* [func JsonUnmarshal(s string) (map[string]interface{}, error)](#JsonUnmarshal)
* [type KeyValueClient](#KeyValueClient)
  * [func NewKeyValueClient(reqEndpoint string, enableLogging bool) (KeyValueClient, error)](#NewKeyValueClient)
  * [func (kvc KeyValueClient) Read(dataSourceID string) (string, error)](#KeyValueClient.Read)
  * [func (kvc KeyValueClient) RegisterDatasource(dataSourceID string, metadata StoreMetadata) error](#KeyValueClient.RegisterDatasource)
  * [func (kvc KeyValueClient) Write(dataSourceID string, payload string) error](#KeyValueClient.Write)
* [type StoreMetadata](#StoreMetadata)
* [type TimeSeriesClient](#TimeSeriesClient)
  * [func NewTimeSeriesClient(reqEndpoint string, enableLogging bool) (TimeSeriesClient, error)](#NewTimeSeriesClient)
  * [func (tsc TimeSeriesClient) LastN(dataSourceID string, n int) (string, error)](#TimeSeriesClient.LastN)
  * [func (tsc TimeSeriesClient) Latest(dataSourceID string) (string, error)](#TimeSeriesClient.Latest)
  * [func (tsc TimeSeriesClient) Range(dataSourceID string, formTimeStamp int64, toTimeStamp int64) (string, error)](#TimeSeriesClient.Range)
  * [func (tsc TimeSeriesClient) RegisterDatasource(dataSourceID string, metadata StoreMetadata) error](#TimeSeriesClient.RegisterDatasource)
  * [func (tsc TimeSeriesClient) Since(dataSourceID string, sinceTimeStamp int64) (string, error)](#TimeSeriesClient.Since)
  * [func (tsc TimeSeriesClient) Write(dataSourceID string, payload string) error](#TimeSeriesClient.Write)
  * [func (tsc TimeSeriesClient) WriteAt(dataSourceID string, timstamp int64, payload string) error](#TimeSeriesClient.WriteAt)


#### <a name="pkg-files">Package files</a>
[export.go](/src/target/export.go) [store-core.go](/src/target/store-core.go) [utils.go](/src/target/utils.go) 





## <a name="ExportLongpoll">func</a> [ExportLongpoll](/src/target/export.go?s=339:410#L5)
``` go
func ExportLongpoll(destination string, payload string) (string, error)
```
ExportLongpoll exports data to external service (payload must be an escaped json string)
permissions must be requested in the app manifest (drivers dont need to use the export service)



## <a name="GetHttpsCredentials">func</a> [GetHttpsCredentials](/src/target/utils.go?s=1752:1785#L68)
``` go
func GetHttpsCredentials() string
```
GetHttpsCredentials Returns a string containing the HTTPS credentials to pass to https server when offering an https server.
These are read form /run/secrets/DATABOX.pem and are generated by the container-manger at run time.



## <a name="JsonUnmarshal">func</a> [JsonUnmarshal](/src/target/utils.go?s=1942:2002#L74)
``` go
func JsonUnmarshal(s string) (map[string]interface{}, error)
```
JsonUnmarshal is a helper function to translate JSON stringified environment variable
to go map[string]




## <a name="KeyValueClient">type</a> [KeyValueClient](/src/target/store-core.go?s=137:230#L3)
``` go
type KeyValueClient struct {
    // contains filtered or unexported fields
}
```






### <a name="NewKeyValueClient">func</a> [NewKeyValueClient](/src/target/store-core.go?s=436:522#L11)
``` go
func NewKeyValueClient(reqEndpoint string, enableLogging bool) (KeyValueClient, error)
```
NewKeyValueClient returns a new KeyValueClient to enable interaction with a key value data store
reqEndpoint is provided in the DATABOX_ZMQ_ENDPOINT environment varable to databox apps and drivers.





### <a name="KeyValueClient.Read">func</a> (KeyValueClient) [Read](/src/target/store-core.go?s=1211:1278#L44)
``` go
func (kvc KeyValueClient) Read(dataSourceID string) (string, error)
```



### <a name="KeyValueClient.RegisterDatasource">func</a> (KeyValueClient) [RegisterDatasource](/src/target/store-core.go?s=1655:1750#L64)
``` go
func (kvc KeyValueClient) RegisterDatasource(dataSourceID string, metadata StoreMetadata) error
```
RegisterDatasource is used by apps and drivers to register datasource in stores they
own.




### <a name="KeyValueClient.Write">func</a> (KeyValueClient) [Write](/src/target/store-core.go?s=872:946#L26)
``` go
func (kvc KeyValueClient) Write(dataSourceID string, payload string) error
```



## <a name="StoreMetadata">type</a> [StoreMetadata](/src/target/utils.go?s=3648:3882#L148)
``` go
type StoreMetadata struct {
    Description    string
    ContentType    string
    Vendor         string
    DataSourceType string
    DataSourceID   string
    StoreType      string
    IsActuator     bool
    Unit           string
    Location       string
}
```









## <a name="TimeSeriesClient">type</a> [TimeSeriesClient](/src/target/store-core.go?s=2121:2216#L82)
``` go
type TimeSeriesClient struct {
    // contains filtered or unexported fields
}
```






### <a name="NewTimeSeriesClient">func</a> [NewTimeSeriesClient](/src/target/store-core.go?s=2431:2521#L90)
``` go
func NewTimeSeriesClient(reqEndpoint string, enableLogging bool) (TimeSeriesClient, error)
```
NewTimeSeriesClient returns a new KeyTimeSeriesClient to enable interaction with a time series data store
reqEndpoint is provided in the DATABOX_ZMQ_ENDPOINT environment varable to databox apps and drivers.





### <a name="TimeSeriesClient.LastN">func</a> (TimeSeriesClient) [LastN](/src/target/store-core.go?s=4629:4706#L166)
``` go
func (tsc TimeSeriesClient) LastN(dataSourceID string, n int) (string, error)
```
LastN will retrieve the last N entries stored at the requested datasource ID
return data is an array of JSON objects of the format {"timestamp":213123123,"data":[data-written-by-driver]}




### <a name="TimeSeriesClient.Latest">func</a> (TimeSeriesClient) [Latest](/src/target/store-core.go?s=4065:4136#L146)
``` go
func (tsc TimeSeriesClient) Latest(dataSourceID string) (string, error)
```
Latest will retrieve the last entry stored at the requested datasource ID
return data is a JSON object of the format {"timestamp":213123123,"data":[data-written-by-driver]}




### <a name="TimeSeriesClient.Range">func</a> (TimeSeriesClient) [Range](/src/target/store-core.go?s=5852:5962#L206)
``` go
func (tsc TimeSeriesClient) Range(dataSourceID string, formTimeStamp int64, toTimeStamp int64) (string, error)
```
Range will retrieve all entries between  formTimeStamp and toTimeStamp timestamp in ms since unix epoch
return data is a JSON object of the format {"timestamp":213123123,"data":[data-written-by-driver]}




### <a name="TimeSeriesClient.RegisterDatasource">func</a> (TimeSeriesClient) [RegisterDatasource](/src/target/store-core.go?s=6440:6537#L226)
``` go
func (tsc TimeSeriesClient) RegisterDatasource(dataSourceID string, metadata StoreMetadata) error
```
RegisterDatasource is used by apps and drivers to register datasource in stores they
own.




### <a name="TimeSeriesClient.Since">func</a> (TimeSeriesClient) [Since](/src/target/store-core.go?s=5211:5303#L186)
``` go
func (tsc TimeSeriesClient) Since(dataSourceID string, sinceTimeStamp int64) (string, error)
```
Since will retrieve all entries since the requested timestamp (ms since unix epoch)
return data is a JSON object of the format {"timestamp":213123123,"data":[data-written-by-driver]}




### <a name="TimeSeriesClient.Write">func</a> (TimeSeriesClient) [Write](/src/target/store-core.go?s=2992:3068#L106)
``` go
func (tsc TimeSeriesClient) Write(dataSourceID string, payload string) error
```
Write will add data to the times series data store. Data will be time stamped at insertion (format ms since 1970)




### <a name="TimeSeriesClient.WriteAt">func</a> (TimeSeriesClient) [WriteAt](/src/target/store-core.go?s=3490:3584#L126)
``` go
func (tsc TimeSeriesClient) WriteAt(dataSourceID string, timstamp int64, payload string) error
```
WriteAt will add data to the times series data store. Data will be time stamped with the timstamp provided in the
timstamp paramiter (format ms since 1970)








- - -
Generated by [godoc2md](http://godoc.org/github.com/davecheney/godoc2md)
