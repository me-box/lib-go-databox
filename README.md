

# libDatabox
`import "./"`

* [Overview](#pkg-overview)
* [Index](#pkg-index)
* [Subdirectories](#pkg-subdirectories)

## <a name="pkg-overview">Overview</a>
A golang library for interfacing with Databox APIs.

Install using go get github.com/me-box/lib-go-databox

Examples can be found in the samples directory




## <a name="pkg-index">Index</a>
* [func ExportLongpoll(destination string, payload string) (string, error)](#ExportLongpoll)
* [func GetDsIdFromDsHref(href string) (string, error)](#GetDsIdFromDsHref)
* [func GetHttpsCredentials() string](#GetHttpsCredentials)
* [func GetStoreURLFromDsHref(href string) (string, error)](#GetStoreURLFromDsHref)
* [func JsonUnmarshal(s string) (map[string]interface{}, error)](#JsonUnmarshal)
* [func RegisterDatasource(href string, metadata StoreMetadata) (string, error)](#RegisterDatasource)
* [func StoreJSONGetlatest(href string) (string, error)](#StoreJSONGetlatest)
* [func StoreJSONGetrange(href string, startTimestamp float64, endTimestamp float64) (string, error)](#StoreJSONGetrange)
* [func StoreJSONGetsince(href string, startTimestamp float64) (string, error)](#StoreJSONGetsince)
* [func StoreJSONWriteKV(href string, data string) error](#StoreJSONWriteKV)
* [func StoreJSONWriteTS(href string, data string) error](#StoreJSONWriteTS)
* [func StoreJSONreadKV(href string, key string) (string, error)](#StoreJSONreadKV)
* [func StoreTsLast(href string, n int) (string, error)](#StoreTsLast)
* [func StoreTsLastNrange(href string, n int, startTimestamp int, endTimestamp int) (string, error)](#StoreTsLastNrange)
* [func StoreTsLastNsince(href string, n int, startTimestamp int) (string, error)](#StoreTsLastNsince)
* [func StoreTsLatest(href string) (string, error)](#StoreTsLatest)
* [func StoreTsRange(href string, startTimestamp int, endTimestamp int) (string, error)](#StoreTsRange)
* [func StoreTsSince(href string, startTimestamp int) (string, error)](#StoreTsSince)
* [func StoreTsWrite(href string, data string) (string, error)](#StoreTsWrite)
* [func WSConnect(href string) (chan []byte, error)](#WSConnect)
* [func WSSubscribe(href string, storeType string) (string, error)](#WSSubscribe)
* [func WSUnsubscribe(href string, storeType string) (string, error)](#WSUnsubscribe)
* [func WaitForStoreStatus(href string)](#WaitForStoreStatus)
* [type KeyValueClient](#KeyValueClient)
  * [func NewKeyValueClient(reqEndpoint string, enableLogging bool) (KeyValueClient, error)](#NewKeyValueClient)
  * [func (kvc KeyValueClient) Read(dataSourceID string) (string, error)](#KeyValueClient.Read)
  * [func (kvc KeyValueClient) Write(dataSourceID string, payload string) error](#KeyValueClient.Write)
* [type StoreMetadata](#StoreMetadata)
* [type TimeSeriesClient](#TimeSeriesClient)
  * [func NewTimeSeriesClient(reqEndpoint string, enableLogging bool) (TimeSeriesClient, error)](#NewTimeSeriesClient)
  * [func (tsc TimeSeriesClient) Latest(dataSourceID string) (string, error)](#TimeSeriesClient.Latest)
  * [func (tsc TimeSeriesClient) Write(dataSourceID string, payload string) error](#TimeSeriesClient.Write)
  * [func (tsc TimeSeriesClient) WriteAt(dataSourceID string, timstamp int64, payload string) error](#TimeSeriesClient.WriteAt)


#### <a name="pkg-files">Package files</a>
[export.go](/src/target/export.go) [store-core.go](/src/target/store-core.go) [store-json.go](/src/target/store-json.go) [store-timeseries.go](/src/target/store-timeseries.go) [subscriptions.go](/src/target/subscriptions.go) [utils.go](/src/target/utils.go) 





## <a name="ExportLongpoll">func</a> [ExportLongpoll](/src/target/export.go?s=115:186#L1)
``` go
func ExportLongpoll(destination string, payload string) (string, error)
```


## <a name="GetDsIdFromDsHref">func</a> [GetDsIdFromDsHref](/src/target/utils.go?s=2561:2612#L98)
``` go
func GetDsIdFromDsHref(href string) (string, error)
```
GetDsIdFromDsHref extracts the base data source ID from the href provied in the DATASOURCE_[name] environment variable.



## <a name="GetHttpsCredentials">func</a> [GetHttpsCredentials](/src/target/utils.go?s=1752:1785#L68)
``` go
func GetHttpsCredentials() string
```
GetHttpsCredentials Returns a string containing the HTTPS credentials to pass to https server when offering an https server.
These are read form /run/secrets/DATABOX.pem and are generated by the container-manger at run time.



## <a name="GetStoreURLFromDsHref">func</a> [GetStoreURLFromDsHref](/src/target/utils.go?s=2271:2326#L86)
``` go
func GetStoreURLFromDsHref(href string) (string, error)
```
GetStoreURLFromDsHref extracts the base store url from the href provied in the DATASOURCE_[name] environment variable.



## <a name="JsonUnmarshal">func</a> [JsonUnmarshal](/src/target/utils.go?s=1942:2002#L74)
``` go
func JsonUnmarshal(s string) (map[string]interface{}, error)
```
JsonUnmarshal is a helper function to translate JSON stringified environment variable
to go map[string]



## <a name="RegisterDatasource">func</a> [RegisterDatasource](/src/target/utils.go?s=8180:8256#L347)
``` go
func RegisterDatasource(href string, metadata StoreMetadata) (string, error)
```
RegisterDatasource is used by apps and drivers to register datasource in stores they
own.



## <a name="StoreJSONGetlatest">func</a> [StoreJSONGetlatest](/src/target/store-json.go?s=43:95#L1)
``` go
func StoreJSONGetlatest(href string) (string, error)
```


## <a name="StoreJSONGetrange">func</a> [StoreJSONGetrange](/src/target/store-json.go?s=216:313#L8)
``` go
func StoreJSONGetrange(href string, startTimestamp float64, endTimestamp float64) (string, error)
```


## <a name="StoreJSONGetsince">func</a> [StoreJSONGetsince](/src/target/store-json.go?s=604:679#L20)
``` go
func StoreJSONGetsince(href string, startTimestamp float64) (string, error)
```


## <a name="StoreJSONWriteKV">func</a> [StoreJSONWriteKV](/src/target/store-json.go?s=1058:1111#L43)
``` go
func StoreJSONWriteKV(href string, data string) error
```


## <a name="StoreJSONWriteTS">func</a> [StoreJSONWriteTS](/src/target/store-json.go?s=901:954#L32)
``` go
func StoreJSONWriteTS(href string, data string) error
```


## <a name="StoreJSONreadKV">func</a> [StoreJSONreadKV](/src/target/store-json.go?s=1215:1276#L54)
``` go
func StoreJSONreadKV(href string, key string) (string, error)
```


## <a name="StoreTsLast">func</a> [StoreTsLast](/src/target/store-timeseries.go?s=298:350#L13)
``` go
func StoreTsLast(href string, n int) (string, error)
```


## <a name="StoreTsLastNrange">func</a> [StoreTsLastNrange](/src/target/store-timeseries.go?s=708:804#L31)
``` go
func StoreTsLastNrange(href string, n int, startTimestamp int, endTimestamp int) (string, error)
```


## <a name="StoreTsLastNsince">func</a> [StoreTsLastNsince](/src/target/store-timeseries.go?s=475:553#L22)
``` go
func StoreTsLastNsince(href string, n int, startTimestamp int) (string, error)
```


## <a name="StoreTsLatest">func</a> [StoreTsLatest](/src/target/store-timeseries.go?s=130:177#L2)
``` go
func StoreTsLatest(href string) (string, error)
```


## <a name="StoreTsRange">func</a> [StoreTsRange](/src/target/store-timeseries.go?s=1186:1270#L49)
``` go
func StoreTsRange(href string, startTimestamp int, endTimestamp int) (string, error)
```


## <a name="StoreTsSince">func</a> [StoreTsSince](/src/target/store-timeseries.go?s=981:1047#L40)
``` go
func StoreTsSince(href string, startTimestamp int) (string, error)
```


## <a name="StoreTsWrite">func</a> [StoreTsWrite](/src/target/store-timeseries.go?s=1432:1491#L59)
``` go
func StoreTsWrite(href string, data string) (string, error)
```


## <a name="WSConnect">func</a> [WSConnect](/src/target/subscriptions.go?s=290:338#L5)
``` go
func WSConnect(href string) (chan []byte, error)
```
WSConnect connects to a target store's notification service

Returns a chan []byte that recives data from every route the connecting container is subscribed to.
Data is a JSON string.



## <a name="WSSubscribe">func</a> [WSSubscribe](/src/target/subscriptions.go?s=1385:1448#L56)
``` go
func WSSubscribe(href string, storeType string) (string, error)
```
WSSubscribe Subscribes the caller to write notifications for a given route.



## <a name="WSUnsubscribe">func</a> [WSUnsubscribe](/src/target/subscriptions.go?s=1726:1791#L66)
``` go
func WSUnsubscribe(href string, storeType string) (string, error)
```
WSUnsubscribe Unsubscribes the caller to write notifications for a given route



## <a name="WaitForStoreStatus">func</a> [WaitForStoreStatus](/src/target/utils.go?s=7162:7198#L296)
``` go
func WaitForStoreStatus(href string)
```
WaitForStoreStatus will wait for the store available at href to respond with an active status.




## <a name="KeyValueClient">type</a> [KeyValueClient](/src/target/store-core.go?s=120:213#L2)
``` go
type KeyValueClient struct {
    // contains filtered or unexported fields
}
```






### <a name="NewKeyValueClient">func</a> [NewKeyValueClient](/src/target/store-core.go?s=215:301#L8)
``` go
func NewKeyValueClient(reqEndpoint string, enableLogging bool) (KeyValueClient, error)
```




### <a name="KeyValueClient.Read">func</a> (KeyValueClient) [Read](/src/target/store-core.go?s=982:1049#L41)
``` go
func (kvc KeyValueClient) Read(dataSourceID string) (string, error)
```



### <a name="KeyValueClient.Write">func</a> (KeyValueClient) [Write](/src/target/store-core.go?s=651:725#L23)
``` go
func (kvc KeyValueClient) Write(dataSourceID string, payload string) error
```



## <a name="StoreMetadata">type</a> [StoreMetadata](/src/target/utils.go?s=7569:7803#L318)
``` go
type StoreMetadata struct {
    Description    string
    ContentType    string
    Vendor         string
    DataSourceType string
    DataSourceID   string
    StoreType      string
    IsActuator     bool
    Unit           string
    Location       string
}
```









## <a name="TimeSeriesClient">type</a> [TimeSeriesClient](/src/target/store-core.go?s=1330:1425#L59)
``` go
type TimeSeriesClient struct {
    // contains filtered or unexported fields
}
```






### <a name="NewTimeSeriesClient">func</a> [NewTimeSeriesClient](/src/target/store-core.go?s=1639:1729#L67)
``` go
func NewTimeSeriesClient(reqEndpoint string, enableLogging bool) (TimeSeriesClient, error)
```
NewTimeSeriesClient returns a new KeyTimeSeriesClient to enable interaction with a time series data store
reqEndpoint is provided in the DATABOX_ZMQ_ENDPOINT environment varable to databox app and drivers.





### <a name="TimeSeriesClient.Latest">func</a> (TimeSeriesClient) [Latest](/src/target/store-core.go?s=3287:3358#L125)
``` go
func (tsc TimeSeriesClient) Latest(dataSourceID string) (string, error)
```
Latest will retrieve the last entry stored at the requested datasource ID
return data is a JSON object of the format {"timestamp":213123123,"data":[data-written-by-driver]}




### <a name="TimeSeriesClient.Write">func</a> (TimeSeriesClient) [Write](/src/target/store-core.go?s=2200:2276#L83)
``` go
func (tsc TimeSeriesClient) Write(dataSourceID string, payload string) error
```
Write will add data to the times series data store. Data will be time stamped at insertion (format ms since 1970)




### <a name="TimeSeriesClient.WriteAt">func</a> (TimeSeriesClient) [WriteAt](/src/target/store-core.go?s=2698:2792#L103)
``` go
func (tsc TimeSeriesClient) WriteAt(dataSourceID string, timstamp int64, payload string) error
```
WriteAt will add data to the times series data store. Data will be time stamped with the timstamp provided in the
timstamp paramiter (format ms since 1970)








- - -
Generated by [godoc2md](http://godoc.org/github.com/davecheney/godoc2md)
